title: "%file-pdf-to-markdown%"
description: "%convert-local-pdf-file-to-markdown-format-with-automatic-upload%"

nodes:

  - node_id: upload-to-cloud#1
    title: "%upload-pdf-to-cloud2%"
    description: "%upload-local-pdf-file-to-cloud-storage%"
    task: upload-to-cloud::upload-to-cloud
    inputs_from:
      - handle: file
        value: /oomol-driver/oomol-storage/做梦/DeepSeek_OCR_paper.pdf
        from_flow:
          - input_handle: file
  - node_id: file-downloader#1
    title: "%download-markdown-file%"
    description: "%download-converted-markdown-file-to-local-path%"
    inputs_from:
      - handle: url
        from_node:
          - node_id: poll-pdf-to-markdown#1
            output_handle: download_url
      - handle: saved_path
        value: null
        from_flow:
          - input_handle: saved_path
      - handle: if_existing
        value: override
      - handle: threads_count
        value: 1
      - handle: headers
        value:
          {}
      - handle: cookies
        value:
          {}
      - handle: window_width
        value: 7
      - handle: failure_ladder
        value:
          - 5
      - handle: min_segment_length
        value: 1048576
      - handle: once_fetch_size
        value: 16384
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: retry_sleep
        value: 0
    subflow: downloader::file-downloader
  - node_id: pdf-to-markdown#1
    title: "%submit-pdf-to-markdown%"
    description: "%submit-uploaded-pdf-url-to-markdown-conversion-service%"
    inputs_from:
      - handle: pdf_url
        from_node:
          - node_id: upload-to-cloud#1
            output_handle: remote_url
      - handle: model
        value: gundam
    task: self::pdf-to-markdown
  - node_id: poll-pdf-to-markdown#1
    title: "%poll-conversion-progress2%"
    description: "%poll-until-conversion-completes-and-return-download-url%"
    inputs_from:
      - handle: session_id
        from_node:
          - node_id: pdf-to-markdown#1
            output_handle: session_id
      - handle: poll_interval
        value: 3
      - handle: max_attempts
        value: 100
    task: self::poll-pdf-to-markdown
inputs_def:
  - handle: file
    json_schema:
      type: string
      ui:widget: file
    nullable: false
    value: /oomol-driver/oomol-storage/做梦/DeepSeek_OCR_paper.pdf
    executor_name: nodejs
  - handle: saved_path
    json_schema:
      type: string
      ui:widget: save
      ui:options:
        excludeAll: true
        filters:
          - name: EPUB
            extensions:
              - epub
    nullable: true
    value:
    executor_name: python
outputs_def:
  - handle: saved_path
    description: "%path-of-the-successfully-downloaded-file2%"
    json_schema:
      type: string
      ui:widget: save
    nullable: false
    executor_name: python
outputs_from:
  - handle: saved_path
    from_node:
      - node_id: file-downloader#1
        output_handle: saved_path
